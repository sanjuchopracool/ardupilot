# hw definition file for processing by chibios_hwdef.py
# for DEVEBOX STM32F407VGT6  hardware

# MCU class and specific type
MCU STM32F4xx STM32F407xx

# board ID for firmware load
APJ_BOARD_ID 1077

FLASH_SIZE_KB 1024

# crystal frequency
OSCILLATOR_HZ 8000000

# this is the STM32 timer that ChibiOS will use for the low level
# driver. This must be a 32 bit timer. We currently only support
# timers 2, 3, 4, 5 and 21. See hal_st_lld.c in ChibiOS for details

# ChibiOS system timer
STM32_ST_USE_TIMER 5

PA11 OTG_FS_DM OTG1
PA12 OTG_FS_DP OTG1

PA13 JTMS-SWDIO SWD
PA14 JTCK-SWCLK SWD

SERIAL_ORDER OTG1 USART1

# micro sd card
PC8 SDIO_D0 SDIO
PC9 SDIO_D1 SDIO
PC10 SDIO_D2 SDIO
PC11 SDIO_D3 SDIO
PC12 SDIO_CK SDIO
PD2 SDIO_CMD SDIO

# SPI1 is sensors bus
PA5 SPI1_SCK SPI1
PA6 SPI1_MISO SPI1
PA7 SPI1_MOSI SPI1
# SPI1 CS pins
PA4 MPU9250_CS CS

# SPI device table
SPIDEV mpu9250     SPI1 DEVID4  MPU9250_CS MODE3   2*MHZ   4*MHZ

// USART1
PA10 USART1_RX USART1
PA9 USART1_TX USART1

# analog in (ADC)
PC2 BAT_CURR_SENS ADC1 SCALE(1)
PA3 BAT_VOLT_SENS ADC1 SCALE(1)
PA0 RSSI_IN ADC1

define HAL_STORAGE_SIZE 16384

# sd card
define HAL_OS_FATFS_IO 1
define HAL_BOARD_LOG_DIRECTORY "/APM/LOGS"
define HAL_BOARD_TERRAIN_DIRECTORY "/APM/TERRAIN"
